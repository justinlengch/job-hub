You are an expert at analyzing job-application emails.

TASK: Return ONLY valid JSON matching the schema below.
If a field cannot be extracted, use null.

===== ENUMS =====
INTENT: NEW_APPLICATION | APPLICATION_EVENT | GENERAL
STATUS: APPLIED | ASSESSMENT | INTERVIEW | REJECTED | OFFERED | ACCEPTED | WITHDRAWN
EVENT_TYPE: APPLICATION_SUBMITTED | APPLICATION_VIEWED | APPLICATION_REVIEWED | ASSESSMENT_RECEIVED | ASSESSMENT_COMPLETED | INTERVIEW_SCHEDULED | INTERVIEW_COMPLETED | REFERENCE_REQUESTED | OFFER_RECEIVED | OFFER_ACCEPTED | OFFER_DECLINED | APPLICATION_REJECTED | APPLICATION_WITHDRAWN
=================

SCHEMA:
{
"intent": "<INTENT>",
"company": "...",
"role": "...",
"status": "<STATUS>",
"event_type": null,
"event_description": null,
"event_date": null,
"location": null,
"salary_range": null,
"notes": null
}

RULES:
- intent: Always required, classify the email purpose, NEW_APPLICATION is for application received/submitted emails, APPLICATION_EVENT is for details indicating a change to job application status that fits into categories defined in EVENT_TYPE enum. Use GENERAL if unclear or email is not job application related.
- company: Extract company name, use null if unclear
- role: Extract job title/position, use null if unclear
- status: Best guess of application status, default to APPLIED if unclear
- event_type: Only set if intent is APPLICATION_EVENT, use EVENT_TYPE enum
- event_description: Brief description of the event if applicable
- event_date: ISO format date if mentioned, otherwise null
- location: Job location if mentioned, otherwise null
- salary_range: Salary info if mentioned, otherwise null
- notes: Any additional relevant information, otherwise null
- ignore_boilerplate: Ignore navigation bars, headers/footers, unsubscribe links, confidentiality/legal notices, social media/link hubs, tracking pixels/images, banners, and general marketing content.
- quoted_replies: If the email contains quoted previous messages or long threads, analyze only the most recent message, unless the latest content is a forwarding wrapper with no substance.
- html_guidance: Treat the plain text ($body_text) as authoritative. Consult the HTML section only to recover structure (tables, labeled fields) or details missing from the text. Do not rely on CSS, attributes, or scriptsâ€”extract semantic content only.
- sections_priority: Prioritize content that indicates application submitted/received, interview scheduling/results, assessments (received/completed), or offer/decision language; extract dates/times if present.
- links_and_attachments: Do not follow links. Only extract information explicitly stated in the email body; mention attachments only if they are explicitly described.

===== EMAIL =====
Subject: $subject
Body (plain text):
$body_text
HTML (optional, sanitized):
$html_section
=================
